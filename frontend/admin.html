<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Internship Recommendation Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="badges.css">
    <style>
        /* Admin Specific Styles */
        .admin-container {
            max-width: 1200px;
            margin: 80px auto;
            padding: 20px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .admin-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .auth-box {
            max-width: 400px;
            margin: 100px auto;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: var(--color-primary);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }

        th {
            background-color: var(--color-secondary);
            font-weight: 600;
        }

        .action-btn {
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            border: none;
            font-size: 0.85em;
            margin-right: 5px;
        }

        .btn-approve {
            background: #d1fae5;
            color: #065f46;
        }

        .btn-reject {
            background: #fee2e2;
            color: #991b1b;
        }

        .btn-expire {
            background: #f3f4f6;
            color: #374151;
        }
    </style>
</head>

<body>
    <!-- Background Elements (copied from index.html for consistency) -->
    <div class="fixed inset-0 -z-10">
        <div
            class="absolute inset-0 bg-gradient-to-br from-[var(--color-bg-1)] via-[var(--color-background)] to-[var(--color-bg-2)] opacity-80">
        </div>
        <div
            class="absolute top-0 left-0 right-0 h-[500px] bg-gradient-to-b from-[var(--color-primary)]/5 to-transparent">
        </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar" style="backdrop-filter: blur(12px); border-bottom: 1px solid var(--color-border);">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">üõ°Ô∏è</span>
                <span class="logo-text">Admin Portal</span>
            </div>
            <div id="adminNav" style="display:none; align-items: center; gap: 1rem;">
                <span id="adminEmail" style="font-weight:500; color: var(--color-text);"></span>
                <button class="btn-secondary" onclick="Admin.logout()">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Login Section -->
    <main id="loginSection" class="container"
        style="display:flex; justify-content:center; align-items:center; min-height:80vh;">
        <div class="admin-card auth-box glass-panel" style="width:100%; max-width:400px; padding:2rem;">
            <div style="text-align: center; margin-bottom: 2rem;">
                <a href="index.html"
                    style="display: inline-block; margin-bottom: 20px; font-size: 0.9rem; color: var(--color-primary); text-decoration: none;">&larr;
                    Back to Student Portal</a>
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Admin Access</h2>
                <p style="color:var(--color-text-secondary);">Secure login to internship management</p>
            </div>
            <form onsubmit="Admin.login(event)">
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <label style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Email
                        Address</label>
                    <input type="email" id="adminEmailInput" placeholder="admin@example.com" required class="form-input"
                        style="width:100%;">
                </div>
                <div class="form-group" style="margin-bottom: 2rem; position: relative;">
                    <label
                        style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Password</label>
                    <div style="position: relative;">
                        <input type="password" id="adminPassInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required class="form-input"
                            style="width:100%; padding-right: 40px;">
                        <button type="button" onclick="Admin.togglePassword()"
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 1.2rem;">
                            üëÅÔ∏è
                        </button>
                    </div>
                </div>

                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                    <label
                        style="display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: #64748b; cursor: pointer;">
                        <input type="checkbox" id="adminRememberMe"> Remember me
                    </label>
                </div>

                <button type="submit" class="btn-primary" style="width:100%; justify-content: center;">Authenticate
                    Access</button>
            </form>
        </div>
    </main>

    <!-- Dashboard Section -->
    <main id="dashboardSection" class="container" style="display:none; padding-top: 2rem;">
        <div class="admin-header"
            style="margin-bottom: 2rem; display:flex; justify-content:space-between; align-items:center;">
            <div>
                <h1 style="font-size: 2rem; font-weight: 800; color: var(--color-text);">Dashboard</h1>
                <p style="color: var(--color-text-secondary);">Overview of platform activity</p>
            </div>
            <button class="btn-primary" onclick="document.getElementById('addInternshipModal').style.display='flex'">
                <span>+</span> Add Internship
            </button>
            <button class="btn-primary" onclick="document.getElementById('addInternshipModal').style.display='flex'">
                <span>+</span> Add Internship
            </button>
        </div>

        <!-- Sync Status Section -->
        <div class="admin-card glass-panel"
            style="margin-bottom: 2rem; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; border-left: 5px solid var(--color-primary);">
            <div>
                <h3 style="margin: 0; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem;">
                    ‚òÅÔ∏è API Sync Status
                    <span id="syncStatusBadge" class="badge badge-verified" style="font-size: 0.7rem;">Active</span>
                </h3>
                <div style="font-size: 0.85rem; color: var(--color-text-secondary); margin-top: 0.25rem;">
                    Last Synced: <span id="lastSyncTime">Checking...</span> | Auto-Removed: <span
                        id="deletedCount">0</span>
                </div>
            </div>
            <button class="btn-secondary" onclick="alert('Sync runs automatically every hour via Scheduler.')">
                Force Sync (Simulated)
            </button>
        </div>

        <div class="stats-grid"
            style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:1.5rem; margin-bottom: 3rem;">
            <!-- Stats Cards (unchanged) -->
            <div class="stat-card glass-panel"
                style="padding: 1.5rem; border-radius: 12px; border: 1px solid var(--color-border);">
                <div
                    style="color: var(--color-text-secondary); font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">
                    Total Listings</div>
                <div class="stat-number" id="statTotal"
                    style="font-size: 2.5rem; font-weight: 800; color: var(--color-text); margin-top: 0.5rem;">0</div>
            </div>
            <div class="stat-card glass-panel"
                style="padding: 1.5rem; border-radius: 12px; border: 1px solid var(--color-border);">
                <div
                    style="color: var(--color-text-secondary); font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">
                    Verified</div>
                <div class="stat-number" id="statVerified"
                    style="font-size: 2.5rem; font-weight: 800; color: var(--color-success); margin-top: 0.5rem;">0
                </div>
            </div>
            <div class="stat-card glass-panel"
                style="padding: 1.5rem; border-radius: 12px; border: 1px solid var(--color-border);">
                <div
                    style="color: var(--color-text-secondary); font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">
                    Pending Verification</div>
                <div class="stat-number" id="statPending"
                    style="font-size: 2.5rem; font-weight: 800; color: var(--color-warning); margin-top: 0.5rem;">0
                </div>
            </div>
        </div>

        <!-- Verification Queue Section -->
        <div class="admin-card glass-panel"
            style="padding: 0; border-radius: 12px; overflow: hidden; border: 1px solid var(--color-border); margin-bottom: 2rem;">
            <div
                style="padding: 1.5rem; border-bottom: 1px solid var(--color-border); background: var(--color-surface); display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0; font-size: 1.25rem; font-weight: 700; color: var(--color-warning);">‚ö†Ô∏è Verification
                    Queue</h3>
                <button class="btn-secondary" style="font-size:0.8rem;" onclick="Admin.fetchVerificationQueue()">Refresh
                    Queue</button>
            </div>
            <div style="overflow-x:auto;">
                <table id="verificationTable" style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--color-bg-1); text-align: left;">
                            <th style="padding: 1rem;">Source</th>
                            <th style="padding: 1rem;">Company & Role</th>
                            <th style="padding: 1rem;">Details</th>
                            <th style="padding: 1rem;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="verificationTableBody" style="background: var(--color-surface);">
                        <tr>
                            <td colspan="4" style="padding:1rem; text-align:center;">No pending verifications.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Main Listings -->
        <div class="admin-card glass-panel"
            style="padding: 0; border-radius: 12px; overflow: hidden; border: 1px solid var(--color-border); margin-bottom: 2rem;">
            <div
                style="padding: 1.5rem; border-bottom: 1px solid var(--color-border); background: var(--color-surface);">
                <h3 style="margin:0; font-size: 1.25rem; font-weight: 700;">All Internships</h3>
            </div>
            <div style="overflow-x:auto;">
                <table id="internshipTable" style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--color-bg-1); text-align: left;">
                            <th style="padding: 1rem;">Company & Location</th>
                            <th style="padding: 1rem;">Role</th>
                            <th style="padding: 1rem;">Status</th>
                            <th style="padding: 1rem;">Deadline</th>
                            <th style="padding: 1rem;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="internshipTableBody" style="background: var(--color-surface);">
                        <!-- Rows injected by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Audit Logs Section -->
        <div class="admin-card glass-panel"
            style="padding: 0; border-radius: 12px; overflow: hidden; border: 1px solid var(--color-border);">
            <div
                style="padding: 1.5rem; border-bottom: 1px solid var(--color-border); background: var(--color-surface);">
                <h3 style="margin:0; font-size: 1.25rem; font-weight: 700;">Audit Logs</h3>
            </div>
            <div style="overflow-x:auto; max-height: 400px;">
                <table id="auditTable" style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--color-bg-1); text-align: left;">
                            <th style="padding: 1rem;">Time</th>
                            <th style="padding: 1rem;">Admin</th>
                            <th style="padding: 1rem;">Action</th>
                            <th style="padding: 1rem;">Entity ID</th>
                            <th style="padding: 1rem;">Details</th>
                        </tr>
                    </thead>
                    <tbody id="auditTableBody" style="background: var(--color-surface); font-size: 0.9rem;">
                        <!-- Rows injected -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Add Internship Modal -->
    <div id="addInternshipModal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index:1000; justify-content:center; align-items:center;">
        <div class="glass-panel"
            style="background:var(--color-surface); padding:2rem; border-radius:16px; width:90%; max-width:500px; color:var(--color-text); border: 1px solid var(--color-border); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
            <h3 style="margin-top:0; margin-bottom: 1.5rem; font-size: 1.5rem;">Add New Internship</h3>
            <form onsubmit="Admin.addInternship(event)">
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Company
                        Name</label>
                    <input type="text" name="company" required class="form-input" style="width:100%;">
                </div>
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Role
                        Title</label>
                    <input type="text" name="role" required class="form-input" style="width:100%;">
                </div>
                <div class="form-group"
                    style="display:grid; grid-template-columns: 1fr 1fr; gap:1rem; margin-bottom: 1rem;">
                    <div>
                        <label
                            style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Location</label>
                        <input type="text" name="location" required class="form-input" style="width:100%;">
                    </div>
                    <div>
                        <label style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Stipend
                            (‚Çπ/mo)</label>
                        <input type="number" name="stipend" required class="form-input" style="width:100%;">
                    </div>
                </div>
                <div class="form-group" style="margin-bottom: 2rem;">
                    <label style="display:block; margin-bottom:0.5rem; font-weight:500; font-size:0.9rem;">Application
                        Deadline</label>
                    <input type="date" name="deadline" required class="form-input" style="width:100%;">
                </div>
                <div style="display:flex; justify-content: flex-end; gap: 1rem;">
                    <button type="button" class="btn-secondary"
                        onclick="document.getElementById('addInternshipModal').style.display='none'">Cancel</button>
                    <button type="submit" class="btn-primary">Create Internship</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
</body>

</html>